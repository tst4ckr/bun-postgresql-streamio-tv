# =============================================================================
# CONFIGURACIÓN OPTIMIZADA DEL ADDON TV IPTV PARA STREMIO
# =============================================================================
# Configuración validada contra Stremio SDK y optimizada para producción
# Incluye solo variables implementadas en TVAddonConfig.js

# =============================================================================
# CONFIGURACIÓN DEL SERVIDOR
# =============================================================================
PORT=7000
HOST=0.0.0.0
NODE_ENV=production
ENABLE_CORS=true
CORS_ORIGIN=*
ENABLE_HELMET=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# =============================================================================
# CONFIGURACIÓN DEL ADDON
# =============================================================================
ADDON_ID=org.stremio.tv-iptv-addon
ADDON_NAME=TV IPTV Addon
ADDON_DESCRIPTION=Canales de TV en vivo desde fuentes IPTV (M3U/RTMP)
ADDON_VERSION=1.0.0
CONTACT_EMAIL=
# Funcionalidades de usuario deshabilitadas para estabilidad
ENABLE_USER_CONFIG=false
ENABLE_DEEP_LINKS=false

# =============================================================================
# CONFIGURACIÓN DE FUENTES DE DATOS
# =============================================================================
# Opciones: csv, m3u, remote_m3u, hybrid
CHANNELS_SOURCE=remote_m3u
CHANNELS_FILE=data/channels.csv
# IMPORTANTE: Reemplazar con URLs reales antes de producción
M3U_URL=https://iptv-org.github.io/iptv/categories/kids.m3u
BACKUP_M3U_URL=https://iptv-org.github.io/iptv/countries/mx.m3u
# Auto-actualización deshabilitada para estabilidad
ENABLE_AUTO_UPDATE=false
UPDATE_INTERVAL_HOURS=24

# =============================================================================
# CONFIGURACIÓN DE STREAMING
# =============================================================================
DEFAULT_QUALITY=HD
# Canales adultos deshabilitados por defecto
ENABLE_ADULT_CHANNELS=false
CACHE_CHANNELS_HOURS=6
STREAM_TIMEOUT_SECONDS=30
MAX_CONCURRENT_STREAMS=50
ENABLE_STREAM_VALIDATION=true

# =============================================================================
# CONFIGURACIÓN DE ASSETS
# =============================================================================
# IMPORTANTE: Reemplazar con CDN real antes de producción
LOGO_CDN_URL=https://cdn.example.com/logos/
FALLBACK_LOGO=https://cdn.example.com/default-logo.png
LOGO_CACHE_HOURS=24
AUTO_FETCH_LOGOS=false

# =============================================================================
# CONFIGURACIÓN DE FILTROS
# =============================================================================
ALLOWED_COUNTRIES=
BLOCKED_COUNTRIES=
DEFAULT_LANGUAGE=es
SUPPORTED_LANGUAGES=

# =============================================================================
# CONFIGURACIÓN DE CACHE OPTIMIZADA PARA STREMIO SDK
# =============================================================================
# Cache para streams en vivo (compatible con cacheMaxAge de Stremio)
STREAM_CACHE_MAX_AGE=300
STREAM_STALE_REVALIDATE=600
STREAM_STALE_ERROR=1800

# Cache para catálogos (optimizado para actualizaciones frecuentes)
CATALOG_CACHE_MAX_AGE=3600

# Cache para metadatos (balanceado para performance)
META_CACHE_MAX_AGE=7200

# Cache para manifest (estable, cambios poco frecuentes)
MANIFEST_CACHE_MAX_AGE=86400

# =============================================================================
# CONFIGURACIÓN DE VALIDACIÓN BÁSICA
# =============================================================================
VALIDATE_STREAMS_ON_STARTUP=false
VALIDATE_STREAMS_INTERVAL_HOURS=12
REMOVE_INVALID_STREAMS=false
STREAM_VALIDATION_TIMEOUT=15
MAX_CONSECUTIVE_FAILURES=3

# =============================================================================
# CONFIGURACIÓN DE VALIDACIÓN DE CALIDAD
# =============================================================================
# Validación de calidad habilitada pero conservadora
ENABLE_QUALITY_VALIDATION=true
AUDIO_VALIDATION_ENABLED=true
VIDEO_VALIDATION_ENABLED=true

# Timeouts conservadores para estabilidad
QUALITY_VALIDATION_TIMEOUT=20000
QUALITY_SAMPLE_DURATION=3000

# Bitrates mínimos realistas
MIN_AUDIO_BITRATE=32000
MIN_VIDEO_BITRATE=100000

# Configuración de reintentos conservadora
MAX_VALIDATION_RETRIES=1
VALIDATION_CACHE_HOURS=2

# =============================================================================
# CONFIGURACIÓN DE MONITOREO
# =============================================================================
# Monitoreo continuo deshabilitado para reducir carga del servidor
ENABLE_CONTINUOUS_MONITORING=false

# Configuración conservadora si se habilita
MONITORING_INTERVAL=300000
MONITORING_ALERT_THRESHOLD=5
MONITORING_FAILURE_RATE_THRESHOLD=0.7
MONITORING_ALERT_COOLDOWN_MINUTES=30
MAX_CONCURRENT_MONITORING=20
MONITORING_TIMEOUT=45000
MONITORING_CLEANUP_INTERVAL_HOURS=48

# =============================================================================
# CONFIGURACIÓN DE SISTEMA DE FALLBACK
# =============================================================================
# Fallback habilitado para mejorar estabilidad
ENABLE_FALLBACK=true

# Configuración conservadora de fallback
MAX_FALLBACK_ATTEMPTS=2
FALLBACK_TIMEOUT=20000
FALLBACK_COOLDOWN_MINUTES=10

# Preferencias de fallback
PREFER_ORIGINAL_STREAM=true
FALLBACK_QUALITY_ORDER=HD,SD,Auto

# Logging de fallback deshabilitado para reducir I/O
ENABLE_FALLBACK_LOGGING=false
FALLBACK_STATS_CACHE_HOURS=12

# =============================================================================
# CONFIGURACIÓN DE LOGS
# =============================================================================
# Configuración optimizada para producción
LOG_LEVEL=warn
ENABLE_REQUEST_LOGGING=false
ENABLE_PERFORMANCE_METRICS=false
LOG_FILE_PATH=logs/addon.log

# =============================================================================
# CONFIGURACIÓN AVANZADA
# =============================================================================
# Failover deshabilitado para simplificar
ENABLE_FAILOVER=false
MAX_RETRY_ATTEMPTS=2
RETRY_DELAY_MS=2000

# =============================================================================
# CONFIGURACIÓN DE FUENTES VÁLIDAS
# =============================================================================
VALID_SOURCES=csv,m3u,remote_m3u,hybrid

# =============================================================================
# NOTAS IMPORTANTES PARA PRODUCCIÓN
# =============================================================================
# 1. Reemplazar todas las URLs de ejemplo (example.com) con URLs reales
# 2. Configurar un CDN real para logos y assets
# 3. Validar conectividad de todas las fuentes M3U
# 4. Considerar habilitar monitoreo continuo en entornos de alta disponibilidad
# 5. Ajustar límites de concurrencia según capacidad del servidor
# 6. Las variables de validación profunda M3U8/HLS no están implementadas en TVAddonConfig.js
#    Si se requieren, deben agregarse al archivo de configuración

# =============================================================================
# COMPATIBILIDAD CON STREMIO SDK
# =============================================================================
# Esta configuración está optimizada para:
# - Cumplir con requisitos de CORS de Stremio
# - Usar valores de cache compatibles con cacheMaxAge, staleRevalidate, staleError
# - Mantener timeouts apropiados para el protocolo Stremio
# - Asegurar estabilidad en producción con configuración conservadora