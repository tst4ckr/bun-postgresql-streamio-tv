# ===================================
# CONFIGURACIÓN DEL SERVIDOR
# ===================================
PORT=7000
NODE_ENV=development
HOST=0.0.0.0

# ===================================
# CONFIGURACIÓN DE FUENTE DE DATOS
# ===================================
# Opciones: 'csv', 'm3u', 'remote_m3u', 'hybrid'
CHANNELS_SOURCE=remote_m3u
CHANNELS_FILE=data/channels.csv
M3U_URL=https://iptv-org.github.io/iptv/categories/kids.m3u
BACKUP_M3U_URL=https://iptv-org.github.io/iptv/countries/mx.m3u

# ===================================
# CONFIGURACIÓN DE TV EN VIVO
# ===================================
DEFAULT_QUALITY=HD
ENABLE_ADULT_CHANNELS=false
CACHE_CHANNELS_HOURS=6

STREAM_TIMEOUT_SECONDS=30
MAX_CONCURRENT_STREAMS=100
ENABLE_STREAM_VALIDATION=true

# ===================================
# CONFIGURACIÓN DE LOGOS Y ASSETS
# ===================================
LOGO_CDN_URL=https://cdn.example.com/logos/
FALLBACK_LOGO=https://example.com/default-tv-logo.png
LOGO_CACHE_HOURS=24
AUTO_FETCH_LOGOS=true

# ===================================
# FILTROS GEOGRÁFICOS Y DE CONTENIDO
# ===================================
ALLOWED_COUNTRIES=MX,ES,AR,CO,US,UK,DE,FR,IT,INTERNACIONAL,PERÚ
BLOCKED_COUNTRIES=
DEFAULT_LANGUAGE=MX,ES,AR,CO,US,UK,DE,FR,IT
SUPPORTED_LANGUAGES=es,en,fr,de,it

# ===================================
# CONFIGURACIÓN DE CACHE PARA TV EN VIVO
# ===================================
# Cache optimizado para streams de TV (segundos)
STREAM_CACHE_MAX_AGE=300
STREAM_STALE_REVALIDATE=600
STREAM_STALE_ERROR=1800

# Cache para catálogos de TV (segundos) - Reducido para actualizaciones frecuentes
# CATALOG_CACHE_MAX_AGE removed - catalog functionality disabled
META_CACHE_MAX_AGE=120
# Cache del manifest (segundos) - Reducido para forzar actualizaciones
MANIFEST_CACHE_MAX_AGE=300

# ===================================
# CONFIGURACIÓN DE VALIDACIÓN
# ===================================
VALIDATE_STREAMS_ON_STARTUP=true
VALIDATE_STREAMS_INTERVAL_MINUTES=15
REMOVE_INVALID_STREAMS=true
STREAM_VALIDATION_TIMEOUT=10
# Validar todos los canales en lugar de solo una muestra
VALIDATE_ALL_CHANNELS=true
# Tamaño del lote para validación por lotes
VALIDATION_BATCH_SIZE=50
# Máxima concurrencia para validación
MAX_VALIDATION_CONCURRENCY=10
# Desactiva canales tras X fallos consecutivos de validación
MAX_CONSECUTIVE_FAILURES=20

# ===================================
# CONFIGURACIÓN DE VALIDACIÓN PROFUNDA M3U8/HLS
# ===================================
# Habilita validación profunda de contenido M3U8/HLS
ENABLE_DEEP_VALIDATION=true
# Valida segmentos individuales de video
ENABLE_SEGMENT_VALIDATION=true
# Número máximo de segmentos a validar por stream
MAX_SEGMENTS_TO_VALIDATE=3
# Timeout específico para validación de segmentos (segundos)
SEGMENT_VALIDATION_TIMEOUT=5
# Ratio mínimo de segmentos válidos para considerar stream como válido (0.0-1.0)
MIN_SEGMENT_VALIDITY_RATIO=0.6
# Habilita detección automática de formato M3U vs M3U8
ENABLE_FORMAT_DETECTION=true
# Habilita análisis de headers Content-Type
ENABLE_CONTENT_TYPE_ANALYSIS=true

# ===================================
# CONFIGURACIÓN DE LOGS Y MONITOREO
# ===================================
LOG_LEVEL=info
ENABLE_REQUEST_LOGGING=true
ENABLE_PERFORMANCE_METRICS=true
LOG_FILE_PATH=logs/addon.log

# ===================================
# CONFIGURACIÓN DE SEGURIDAD
# ===================================
ENABLE_CORS=true
CORS_ORIGIN=*
ENABLE_HELMET=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# ===================================
# CONFIGURACIÓN DEL ADDON
# ===================================
ADDON_ID=org.stremio.tv-iptv-channels
ADDON_NAME=TV IPTV Channels
ADDON_DESCRIPTION=Canales de TV en vivo desde fuentes IPTV compatibles con Stremio
ADDON_VERSION=1.0.0
CONTACT_EMAIL=

# ===================================
# CONFIGURACIÓN AVANZADA
# ===================================
ENABLE_USER_CONFIG=false
ENABLE_DEEP_LINKS=true

ENABLE_FAILOVER=true
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY_MS=1000